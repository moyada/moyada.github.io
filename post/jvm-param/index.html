<!DOCTYPE html>
<html lang="zh-Hans">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  

  
  
  
    
  
  <meta name="description" content="table th:nth-of-type(1) { width: 250px; } table th:nth-of-type(2) { width: 30px; } table th:nth-of-type(3) { width: 300px; } table th:nth-of-type(4) { width: 150px; } 空间 通用 参数">

  
  <link rel="alternate" hreflang="zh-Hans" href="https://moyada.github.io/post/jvm-param/">

  


  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=STHeiti%7CLato:400,700%7CMerriweather%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hue257fc9265b3452e5de46b8a7fffc1af_7246_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hue257fc9265b3452e5de46b8a7fffc1af_7246_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://moyada.github.io/post/jvm-param/">

  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="疯狂的厨子">
  <meta property="og:url" content="https://moyada.github.io/post/jvm-param/">
  <meta property="og:title" content="JVM 参数 | 疯狂的厨子">
  <meta property="og:description" content="table th:nth-of-type(1) { width: 250px; } table th:nth-of-type(2) { width: 30px; } table th:nth-of-type(3) { width: 300px; } table th:nth-of-type(4) { width: 150px; } 空间 通用 参数"><meta property="og:image" content="img/map[gravatar:%!s(bool=true) shape:circle]">
  <meta property="twitter:image" content="img/map[gravatar:%!s(bool=true) shape:circle]"><meta property="og:locale" content="zh-Hans">
  
    
      <meta property="article:published_time" content="2018-04-24T21:25:44&#43;00:00">
    
    <meta property="article:modified_time" content="2018-04-24T21:25:44&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://moyada.github.io/post/jvm-param/"
  },
  "headline": "JVM 参数",
  
  "datePublished": "2018-04-24T21:25:44Z",
  "dateModified": "2018-04-24T21:25:44Z",
  
  "publisher": {
    "@type": "Organization",
    "name": "疯狂的厨子",
    "logo": {
      "@type": "ImageObject",
      "url": "https://moyada.github.io/images/icon_hue257fc9265b3452e5de46b8a7fffc1af_7246_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "table th:nth-of-type(1) { width: 250px; } table th:nth-of-type(2) { width: 30px; } table th:nth-of-type(3) { width: 300px; } table th:nth-of-type(4) { width: 150px; } 空间 通用 参数"
}
</script>

  

  


  


  





  <title>JVM 参数 | 疯狂的厨子</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>搜索</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">疯狂的厨子</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="切换导航">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">疯狂的厨子</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-center" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#about"><span>主页</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/post"><span>文章</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/categories"><span>分类</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/tags"><span>标签</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/projects"><span>项目</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      

      

    </ul>

  </div>
</nav>


  <div class="row flex-xl-nowrap">
    <div class="d-none d-xl-block col-md-3 col-xl-3 docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">JVM 参数</a></li>
      </ul>

      <nav id="TableOfContents">
  <ul>
    <li><a href="#空间">空间</a>
      <ul>
        <li><a href="#通用">通用</a></li>
        <li><a href="#java8之前">Java8之前</a></li>
        <li><a href="#java8之后">Java8之后</a></li>
        <li><a href="#java9之后">Java9之后</a></li>
      </ul>
    </li>
    <li><a href="#性能">性能</a>
      <ul>
        <li><a href="#通用-1">通用</a></li>
        <li><a href="#jit">JIT</a></li>
        <li><a href="#docker">Docker</a></li>
      </ul>
    </li>
    <li><a href="#gc">GC</a>
      <ul>
        <li><a href="#通用-2">通用</a></li>
        <li><a href="#cms">CMS</a></li>
        <li><a href="#g1">G1</a></li>
        <li><a href="#zgc">ZGC</a></li>
        <li><a href="#shenandoah-gc">Shenandoah GC</a></li>
      </ul>
    </li>
    <li><a href="#日志">日志</a>
      <ul>
        <li><a href="#通用-3">通用</a></li>
        <li><a href="#jit-1">JIT</a></li>
        <li><a href="#g1-1">G1</a></li>
      </ul>
    </li>
    <li><a href="#其他">其他</a></li>
  </ul>
</nav>
      
    </div>

    <div class="d-none d-xl-block col-md-2 col-xl-2"></div>

    <main class="col-12 col-md-7 col-xl-7 py-md-6 pl-md-7 docs-content" role="main">
		<article class="article">

		  





















<div class=" pt-3">
  
    
      <h1>JVM 参数</h1>
    
  
  
  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    2018-04-24
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    9 分钟阅读时长 
  </span>
  <span>&nbsp;</span>
  4340 字 
  

  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/categories/jvm/">JVM</a></span>
  

</div>

    














  
</div>



		  

		    <div class="article-style">
		      <style>
table th:nth-of-type(1) {
    width: 250px;
}

table th:nth-of-type(2) {
    width: 30px;
}

table th:nth-of-type(3) {
    width: 300px;
}

table th:nth-of-type(4) {
    width: 150px;
}
</style>
<h2 id="空间">空间</h2>
<h3 id="通用">通用</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-Xms<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center">●</td>
<td align="left">Heap 初始化的大小</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Xmx<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center">●</td>
<td align="left">Heap 最大值</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Xmn<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center">●</td>
<td align="left">新生代的大小</td>
<td align="left">G1 GC 下建议不设置该参数</td>
</tr>
<tr>
<td align="left">-Xss<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center">●</td>
<td align="left">线程栈的大小，默认 1M</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:MaxDirectMemorySize=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center"></td>
<td align="left">设置 NIO 的直接缓存最大容量</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:SurvivorRatio=<code>&lt;size&gt;</code></td>
<td align="center">●</td>
<td align="left">Eden 和 Survior(from和to) 大小比例，默认是 8</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:AutoBoxCacheMax=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置自动装箱池缓存大小</td>
<td align="left">server模式专有</td>
</tr>
<tr>
<td align="left">-XX:+UseAdaptiveGCBoundary</td>
<td align="center"></td>
<td align="left">动态化使用资源</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseAdaptiveSizePolicy</td>
<td align="center"></td>
<td align="left">动态调整各个代区的内存大小，每次 minor gc 后会重新计算 eden，from 和 to 的大小</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:NewSize=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center"></td>
<td align="left">设置新生代的初始大小</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:MaxNewSize=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center"></td>
<td align="left">设置新生代的最大值</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:NewRatio=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置新生代和老年代的比例</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Dsun.reflect.noInflation=<code>&lt;boolean&gt;</code></td>
<td align="center"></td>
<td align="left">反射时是否使用代理类</td>
<td align="left">默认 false</td>
</tr>
<tr>
<td align="left">-Dsun.reflect.inflationThreshold=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">反射时生成代理类调用的次数，之后使用 JNI 字节码调用</td>
<td align="left">默认 15</td>
</tr>
<tr>
<td align="left">-XX:MaxRAM=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置最大内存参数</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:MinRAMFraction=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置最大内存除数，默认为 4，即堆空间内 MaxRAM 的四分之一</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ErgoHeapSizeLimit=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">限制堆内存上限</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<h3 id="java8之前">Java8之前</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:PermSize</td>
<td align="center">●</td>
<td align="left">方法区的初始化大小</td>
<td align="left">java8 后废弃</td>
</tr>
<tr>
<td align="left">-XX:MaxPermSize</td>
<td align="center">●</td>
<td align="left">方法区的最大值</td>
<td align="left">java8 后废弃</td>
</tr>
</tbody>
</table>
<h3 id="java8之后">Java8之后</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:MetaspaceSize=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center">●</td>
<td align="left">元空间的初始化大小</td>
<td align="left">java8 后新增</td>
</tr>
<tr>
<td align="left">-XX:MaxMetaspaceSize=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center">●</td>
<td align="left">元空间的最大值</td>
<td align="left">java8 后新增，初始大小是 21M</td>
</tr>
</tbody>
</table>
<h3 id="java9之后">Java9之后</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:G1HeapRegionSize=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center">●</td>
<td align="left">设置每个区域块大小</td>
<td align="left">1M-32M 之间,必须是2的幂</td>
</tr>
<tr>
<td align="left">-XX:G1NewSizePercent=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置年轻代大小占堆的最小值百分比</td>
<td align="left">默认值是 Java 堆的 5%</td>
</tr>
<tr>
<td align="left">-XX:G1MaxNewSizePercent=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置年轻代大小占堆的最大值百分比</td>
<td align="left">默认值是 Java 堆的 60%</td>
</tr>
</tbody>
</table>
<h2 id="性能">性能</h2>
<h3 id="通用-1">通用</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-server</td>
<td align="center">●</td>
<td align="left">虚拟机会以 server 模式运行，该模式与 C2 编译器共同运行，更注重编译的质量，启动速度慢，但是运行效率高，适合用在服务器环境下，针对生产环境进行了优化</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+AlwaysPreTouch</td>
<td align="center">●</td>
<td align="left">JVM 启动时就会先访问所有分配给它的内存,让操作系统把内存真正的分配给JVM</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseTLAB</td>
<td align="center">●</td>
<td align="left">通过快速对象分配模式在 TLAB（Thread-local allocation buffers）中进行分配对象</td>
<td align="left">以避免大量的线程通信所导致的性能下降</td>
</tr>
<tr>
<td align="left">-XX:TLABSize=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置 TLAB 的初始化大小</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:-ResizeTLAB</td>
<td align="center"></td>
<td align="left">禁用自动调整 TLAB</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseLargePages</td>
<td align="center"></td>
<td align="left">使用最大值内存页</td>
<td align="left">需要 Linux kernel &gt;= 4.7</td>
</tr>
<tr>
<td align="left">-XX:+UseTransparentHugePages</td>
<td align="center">●</td>
<td align="left">对大对象分配使用大内存页分配</td>
<td align="left">需要 Linux kernel &gt;= 4.7</td>
</tr>
<tr>
<td align="left">-XX:+UseNUMA</td>
<td align="center">●</td>
<td align="left">对象分配优先使用 NUMA 本地内存</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PerfDisableSharedMem</td>
<td align="center">●</td>
<td align="left">GC 日志指向 /dev/shm，避免 IO 造成的 JVM 停顿</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:-OmitStackTraceInFastThrow</td>
<td align="center">●</td>
<td align="left">强制要求 JVM 始终抛出含堆栈的异常</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+ShowHiddenFrames</td>
<td align="center"></td>
<td align="left">展示虚拟机隐藏的栈信息</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ObjectAlignmentInBytes=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置 java 对象的内存对齐，默认是 8 字节，指定的值必须是 2 的幂次，且必须在 8 和 256 之间</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PageAlignDirectMemory</td>
<td align="center"></td>
<td align="left">设置堆外内存使用内存对齐</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseCompressedOops</td>
<td align="center">●</td>
<td align="left">在 64 位环境下，压缩对象头</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseFastAccessorMethods</td>
<td align="center"></td>
<td align="left">原始类型的快速优化</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseFastEmptyMethods</td>
<td align="center"></td>
<td align="left">空方法优化</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseFastJNIAccessors</td>
<td align="center"></td>
<td align="left">引用类或 int 的成员方法优化</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:LargePageSizeInBytes=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center"></td>
<td align="left">Heap 中内存页的最大值，参数必须是 2 的幂，不可设置过大</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:-UseBiasedLocking</td>
<td align="center"></td>
<td align="left">禁用偏向锁</td>
<td align="left">在存在大量锁对象的创建并高度并发的环境下禁用偏向锁能够带来一定的性能优化</td>
</tr>
<tr>
<td align="left">-XX:BiasedLockingStartupDelay=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left"></td>
<td align="left">延迟(秒钟)启用偏向锁</td>
</tr>
<tr>
<td align="left">-XXtlaSize:min=<code>&lt;size&gt;&lt;unit&gt;</code>,preferred=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center"></td>
<td align="left">调整 TLA，每个线程私有的空间的默认最小大小和默认首选大小</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+AlwaysAtomicAccesses</td>
<td align="center"></td>
<td align="left">实现对所有 Access 的原子性保证</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+EliminateAllocations</td>
<td align="center"></td>
<td align="left">开启标量替换</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+DoEscapeAnalysis</td>
<td align="center"></td>
<td align="left">进行逃逸分析之后，创建的可分解的对象都将由栈上分配</td>
<td align="left">标量替换，栈上分配，受限于栈的空间大小</td>
</tr>
<tr>
<td align="left">-XX:+PrintEscapeAnalysis</td>
<td align="center"></td>
<td align="left">查看逃逸分析结果</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+EliminateLocks</td>
<td align="center"></td>
<td align="left">分析并且消除无线程竞争下的锁</td>
<td align="left">同步消除，必须开启 -XX:+DoEscapeAnalysis 和 -server 模式</td>
</tr>
<tr>
<td align="left">-XX:+PrintEliminateAllocations</td>
<td align="center"></td>
<td align="left">查看标量的替换情况</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:LiveNodeCountInliningCutoff=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">max number of live nodes in a method</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PositiveIdentityHash</td>
<td align="center"></td>
<td align="left">只允许分配正数的哈希值</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<h3 id="jit">JIT</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:+EnableJVMCI</td>
<td align="center"></td>
<td align="left">使用 Graal</td>
<td align="left">java10</td>
</tr>
<tr>
<td align="left">-XX:+UseJVMCICompiler</td>
<td align="center"></td>
<td align="left">启动 Graal JIT编译器</td>
<td align="left">java10</td>
</tr>
<tr>
<td align="left">-XX:+TieredCompilation</td>
<td align="center">●</td>
<td align="left">启用分层编译策略，根据编译器编译、优化的规模与耗时，划分出不同的编译层次</td>
<td align="left">java8 默认开启</td>
</tr>
<tr>
<td align="left">-XX:TieredStopAtLevel=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置 JIT 编译的最高层级</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseCodeCacheFlushing</td>
<td align="center">●</td>
<td align="left">当代码缓存被填满时让 JVM 放弃一些编译代码</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:InitialCodeCacheSize=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置初始代码缓存的大小</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ReservedCodeCacheSize=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center"></td>
<td align="left">设置代码缓存的最大值</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:CompileThreshold=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">当某个方法被调用 + 循环次数累计超过该值时，触发标准的 JIT 编译</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:InterpreterBackwardBranchLimit=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">当某个方法被调用 + 循环次数累计超过该值时，触发 OSR 形式的 JIT 编译</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:HugeMethodLimit=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">JIT 编译字节码大小超过 size 字节的方法就是巨型方法</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+DontCompileHugeMethods</td>
<td align="center"></td>
<td align="left">不编译巨型方法</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:-UseCounterDecay</td>
<td align="center"></td>
<td align="left">禁止 JIT 调用计数器衰减</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+CompileCommand=<code>command,method[,option]</code></td>
<td align="center"></td>
<td align="left">定制编译需求，比如过滤某个方法不做 JIT 编译</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+InlineSynchronizedMethods</td>
<td align="center"></td>
<td align="left">对同步方法进行内联</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:MaxInlineLevel=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">在进行方法内联前，方法的最多嵌套调用次数</td>
<td align="left">默认为 9</td>
</tr>
<tr>
<td align="left">-XX:MaxInlineSize=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">内联方法的最大字节码大小</td>
<td align="left">默认为 35</td>
</tr>
<tr>
<td align="left">-XX:FreqInlineSize=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">内联 <code>频繁执行</code> 的方法的最大字节码大小</td>
<td align="left">默认为 325</td>
</tr>
<tr>
<td align="left">-XX:MaxTrivialSize=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">归属于不重要的方法的最大字节码大小</td>
<td align="left">默认为 6</td>
</tr>
<tr>
<td align="left">-XX:MinInliningThreshold=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">方法被内联的最小调用次数</td>
<td align="left">默认为 250</td>
</tr>
<tr>
<td align="left">-XX:MaxRecursiveInlineLevel=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">对方法的递归调用做内联优化</td>
<td align="left">默认为 1</td>
</tr>
<tr>
<td align="left">-XX:Tier1MaxInlineSize=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">1层内联方法的最大字节码大小</td>
<td align="left">默认为 8</td>
</tr>
<tr>
<td align="left">-XX:Tier1FreqInlineSize=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">1层内联 <code>频繁执行</code> 的方法的最大字节码大小</td>
<td align="left">默认为 35</td>
</tr>
<tr>
<td align="left">-XX:LiveNodeCountInliningCutoff=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">方法内最大存活的 JIT IR 节点数量</td>
<td align="left">默认为 20000</td>
</tr>
</tbody>
</table>
<h3 id="docker">Docker</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:ActiveProcessorCount=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">指定 jvm 使用 cpu 个数</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseContainerSupport</td>
<td align="center"></td>
<td align="left">支持容器化功能，默认开启</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseCGroupMemoryLimitForHeap</td>
<td align="center"></td>
<td align="left">开启 CGroup Namespace</td>
<td align="left">jdk10 后废弃</td>
</tr>
</tbody>
</table>
<h2 id="gc">GC</h2>
<h3 id="通用-2">通用</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:+UseCompressedClassPointers</td>
<td align="center">●</td>
<td align="left">开启压缩类指针</td>
<td align="left">64 位平台上默认打开</td>
</tr>
<tr>
<td align="left">-XX:+UseParNewGC</td>
<td align="center">●</td>
<td align="left">设置年轻代为多线程收集</td>
<td align="left">可以和 CMS GC 一起使用</td>
</tr>
<tr>
<td align="left">-XX:+ParallelRefProcEnabled</td>
<td align="center">●</td>
<td align="left">并行的处理对象标记过程</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ParallelGCThreads=<code>&lt;size&gt;</code></td>
<td align="center">●</td>
<td align="left">指定并行处理 GC 的线程数</td>
<td align="left">默认 GC 线程数为 CPU 的数量</td>
</tr>
<tr>
<td align="left">-XX:ParGCCardsPerStrideChunk=<code>&lt;size&gt;</code></td>
<td align="center">●</td>
<td align="left">设置每个线程每次扫描的 Card 数量</td>
<td align="left">CardTable 用来标记老年代的某一块内存区域中的对象是否持有新生代对象的引用,卡表的数量取决于老年代的大小和每张卡对应的内存大小</td>
</tr>
<tr>
<td align="left">-XX:MinHeapFreeRatio=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">指定堆内存在使用率以下进行收缩</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+DisableExplicitGC</td>
<td align="center"></td>
<td align="left">禁止代码中显示调用 GC</td>
<td align="left">CMS 下可使用 -XX:+ExplicitGCInvokesConcurrent 替换</td>
</tr>
<tr>
<td align="left">-XX:+GCLockerInvokesConcurrent</td>
<td align="center"></td>
<td align="left">并发的执行 GC Lock</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ConcGCThreads=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置并行GC的线程数</td>
<td align="left">设置为并行垃圾回收线程数 (ParallelGCThreads) 的 1/4 左右</td>
</tr>
<tr>
<td align="left">-XX:MaxTenuringThreshold=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置新生代经过多少次YGC晋升到老生代</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:PretenureSizeThreshold=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">晋升老年代对象年龄</td>
<td align="left">无默认值，Paralle Scavenge收集器无法识别</td>
</tr>
<tr>
<td align="left">-XX:CompressedClassSpaceSize=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center"></td>
<td align="left">设置指针压缩空间大小</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+OptimizeStringConcat</td>
<td align="center"></td>
<td align="left">字符串concat优化</td>
<td align="left">默认开启</td>
</tr>
<tr>
<td align="left">-XX:+UseParallelGC</td>
<td align="center"></td>
<td align="left">选择垃圾收集器为并行收集器</td>
<td align="left">不能和 CMS GC 一起使用,系统吨吐量优先</td>
</tr>
<tr>
<td align="left">-XX:GCTimeRatio=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置吞吐量大小</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:SoftRefLRUPolicyMSPerMB=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置每兆空间中软引用的生命周期 (多少毫秒后清除)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Xnoclassgc</td>
<td align="center"></td>
<td align="left">不对 Class 元数据进行 GC</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<h3 id="cms">CMS</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:+UseConcMarkSweepGC</td>
<td align="center">●</td>
<td align="left">启用 CMS 低停顿垃圾收集器</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+CMSParallelRemarkEnabled</td>
<td align="center">●</td>
<td align="left">开启并行标记</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+ExplicitGCInvokesConcurrent</td>
<td align="center">●</td>
<td align="left">命令JVM无论什么时候调用系统 GC，都执行 CMS GC，而不是 Full GC</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+ExplicitGCInvokesConcurrent <br/> AndUnloadsClasses</td>
<td align="center">●</td>
<td align="left">保证当有系统 GC 调用时，永久代也被包括进 CMS 垃圾回收的范围内</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+CMSConcurrentMTEnabled</td>
<td align="center"></td>
<td align="left">并发的 CMS 阶段将以多线程执行</td>
<td align="left">默认开启</td>
</tr>
<tr>
<td align="left">-XX:+CMSParallelInitialMarkEnabled</td>
<td align="center"></td>
<td align="left">开启初始标记过程中的并行化</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ParallelCMSThreads=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设定 CMS 的线程数量</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:CMSInitiatingOccupancyFraction=<code>&lt;size&gt;</code></td>
<td align="center">●</td>
<td align="left">指定 CMS 老年代在对内存占用率达到多少百分比的时候开始GC</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:CMSInitiatingPermOccupancyFraction=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">指定 CMS 永久代在对内存占用率达到多少百分比的时候开始GC</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseCMSInitiatingOccupancyOnly</td>
<td align="center"></td>
<td align="left">只使用 CMSInitiatingOccupancyFraction 设置的回收阈值，否则交由 JVM 动态调整</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:CMSTriggerRatio</td>
<td align="center"></td>
<td align="left">当 CMSInitiatingOccupancyFraction 错误时的生成策略</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+CMSScavengeBeforeRemark</td>
<td align="center"></td>
<td align="left">重新标记之前对年轻代做一次 Minor GC</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+CMSClassUnloadingEnabled</td>
<td align="center">●</td>
<td align="left">在 <code>CMS GC</code> 时对永久代进行垃圾回收(类卸载)</td>
<td align="left">在 Full GC 时会扫描 MetaSpace/PermGen</td>
</tr>
<tr>
<td align="left">-XX:CMSFullGCsBeforeCompaction=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">指定进行多少次Full GC之后，执行内存空间整理</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:UseCMSCompactAtFullCollection</td>
<td align="center"></td>
<td align="left">在 Full GC 的时候，对年老代的压缩</td>
<td align="left">可能会影响性能，但是可以消除碎片</td>
</tr>
</tbody>
</table>
<h3 id="g1">G1</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:+UseG1GC</td>
<td align="center">●</td>
<td align="left">使用G1垃圾回收器</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:InitiatingHeapOccupancyPercent=<code>&lt;size&gt;</code></td>
<td align="center">●</td>
<td align="left">设置触发并发标记周期时的堆内存占用率阈值. G1之类的垃圾收集器用它来触发并发GC周期,基于整个堆的使用率,而不只是某一代内存的使用比</td>
<td align="left">值为 0 则表示一直执行 GC 循环，默认值为 45</td>
</tr>
<tr>
<td align="left">-XX:+G1UseAdaptiveIHOP</td>
<td align="center">●</td>
<td align="left">开启自适应并发标记控制</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:G1ConcRefinementThreads=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置 Remenbered Set 的工作线程数目</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:MaxGCPauseMillis=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置每次年轻代垃圾回收的最长时间</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseStringDeduplication</td>
<td align="center">●</td>
<td align="left">使用字符串去重机制</td>
<td align="left">G1 收集器下生效</td>
</tr>
<tr>
<td align="left">-XX:G1MixedGCLiveThresholdPercent=<code>&lt;size&gt;</code></td>
<td align="center">●</td>
<td align="left">设置启动混合垃圾回收周期的老年代占用率阈值</td>
<td align="left">默认占用率为 65%</td>
</tr>
<tr>
<td align="left">-XX:G1HeapWastePercent=<code>&lt;size&gt;</code></td>
<td align="center">●</td>
<td align="left">设置允许浪费的堆百分比，如果触发回收百分比小于该百分比，JVM 则不会启动混合垃圾回收周期</td>
<td align="left">默认值是 10%</td>
</tr>
<tr>
<td align="left">-XX:G1MixedGCCountTarget=<code>&lt;size&gt;</code></td>
<td align="center">●</td>
<td align="left">设置标记周期完成后，执行混合垃圾回收老年代的目标次数</td>
<td align="left">默认值是 8</td>
</tr>
<tr>
<td align="left">-XX:G1OldCSetRegionThresholdPercent=<code>&lt;size&gt;</code></td>
<td align="center">●</td>
<td align="left">设置混合垃圾回收期间要回收的最大旧区域数</td>
<td align="left">默认值是 Java 堆的 10%</td>
</tr>
<tr>
<td align="left">-XX:G1ReservePercent=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置作为预留存活区在 heap 中的百分比</td>
<td align="left">默认值是 10%</td>
</tr>
<tr>
<td align="left">-XX:+G1SummarizeConcMark</td>
<td align="center"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+G1PrintHeapRegions</td>
<td align="center"></td>
<td align="left">打印 G1 收集器收集的区域</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+G1SummarizeRSetStats</td>
<td align="center"></td>
<td align="left">打印标记过程引用信息(Print RSet processing information)</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:G1SummarizeRSetStatsPeriod=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">指定 GC 周期频率报告</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:-G1EagerReclaimHumongousObjects</td>
<td align="center"></td>
<td align="left">禁用 G1 优先尝试回收大对象</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+G1TraceEagerReclaimHumongousObjects</td>
<td align="center"></td>
<td align="left">G1 在每个 <code>Young GG</code> 周期都会回收消亡的 Humongous 对象</td>
<td align="left">默认开启</td>
</tr>
<tr>
<td align="left">-XX:+G1ConcRegionFreeingVerbose</td>
<td align="center"></td>
<td align="left">Debug JVM</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<h3 id="zgc">ZGC</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:+UseZGC</td>
<td align="center"></td>
<td align="left">启动 ZGC 垃圾回收器</td>
<td align="left">java11，非正式版本需开启 <code>-XX:+UnlockExperimentalVMOptions</code> 解锁参数</td>
</tr>
</tbody>
</table>
<blockquote>
<p><a href="https://wiki.openjdk.java.net/display/zgc/Main">https://wiki.openjdk.java.net/display/zgc/Main</a></p>
</blockquote>
<h3 id="shenandoah-gc">Shenandoah GC</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:+UseShenandoahGC</td>
<td align="center"></td>
<td align="left">启动 Shenandoah 垃圾回收器</td>
<td align="left">jdk12，非正式版本需开启 <code>-XX:+UnlockExperimentalVMOptions</code> 解锁参数</td>
</tr>
<tr>
<td align="left">-XX:ShenandoahInitFreeThreshold=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置触发垃圾回收的初始阈值</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ShenandoahMinFreeThreshold=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">无条件触发垃圾回收的最小空间阀值</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ShenandoahAllocSpikeFactor=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置预留堆空间百分比</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ShenandoahGarbageThreshold=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置一个 Region 被视为 <code>可回收</code> 的垃圾对象所需百分比</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ShenandoahFreeThreshold=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置启动垃圾回收的空闲堆空间百分比</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ShenandoahAllocationThreshold=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">设置上一次垃圾回收周期的分配内存百分比</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+ShenandoahPacing</td>
<td align="center"></td>
<td align="left">根据垃圾回收效率分配应用程序的线程与可用空间</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:ShenandoahPacingMaxDelay=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center"></td>
<td align="left">在最大延迟时间之前，将不干预应用程序的分配</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+ShenandoahDegeneratedGC</td>
<td align="center"></td>
<td align="left">当程序遇到分配失败时，Shenandoah 将会暂停应用线程，直到完成后续垃圾回收工作</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+ShenandoahVerify</td>
<td align="center"></td>
<td align="left">检测垃圾回收异常</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+ShenandoahGCHeuristics=[ passive | aggressive ]</td>
<td align="center"></td>
<td align="left">暂停应用线程执行垃圾回收 或 执行紧凑的垃圾回收并疏散所有非空 Region</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+ShenandoahVerifyOptoBarriers</td>
<td align="center"></td>
<td align="left">验证 C2 模式</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<blockquote>
<p><a href="https://wiki.openjdk.java.net/display/shenandoah/Main">https://wiki.openjdk.java.net/display/shenandoah/Main</a></p>
</blockquote>
<h2 id="日志">日志</h2>
<p><big><b>Java9之后</b></big></p>
<p>jvm日志使用 <code>-Xlog[&lt;what&gt;][:[&lt;output&gt;][:[&lt;decorators&gt;][:&lt;output-options&gt;]]]</code> 记录
可以使用 <code>java -Xlog:help</code> 查看帮助文档</p>
<ul>
<li>案例</li>
</ul>
<blockquote>
<p>-Xlog:disable -Xlog:gc+liveness=info,rt*=off:file=../logs/gc_%t.log:time,uptimemillis,pid:filecount=5,filesize=1024
先关闭所有日志，打开 gc 和存活对象的日志，关闭包含 rt 的日志级别，输出日志至文件，额外包含时间、耗时、进程 id，以 5 个 1M 的文件循环保存历史日志文件。</p>
</blockquote>
<p>参考:
<a href="http://www.cnblogs.com/IcanFixIt/p/7259712.html">http://www.cnblogs.com/IcanFixIt/p/7259712.html</a>
<a href="https://juejin.im/post/5a981f056fb9a028bf04bec4">https://juejin.im/post/5a981f056fb9a028bf04bec4</a>
<a href="https://blog.gceasy.io/2017/10/17/43-gc-logging-flags-removed-in-java-9/">https://blog.gceasy.io/2017/10/17/43-gc-logging-flags-removed-in-java-9/</a></p>
<ul>
<li><a href="http://openjdk.java.net/jeps/158">http://openjdk.java.net/jeps/158</a></li>
</ul>
<h3 id="通用-3">通用</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-Xloggc=<code>&lt;file&gt;</code></td>
<td align="center"></td>
<td align="left">日志文件</td>
<td align="left">例如 -Xloggc=/data/application/logs/gc.log</td>
</tr>
<tr>
<td align="left">-XX:+verbosegc</td>
<td align="center">●</td>
<td align="left">打印每次GC的消息</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintGC</td>
<td align="center">●</td>
<td align="left">打印每次GC的消息</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintGCCause</td>
<td align="center">●</td>
<td align="left">打印 GC 的原因</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintGCDetails</td>
<td align="center">●</td>
<td align="left">打印GC日志详情</td>
<td align="left">建议开启</td>
</tr>
<tr>
<td align="left">-XX:+PrintGCTimeStamps</td>
<td align="center"></td>
<td align="left">输出GC的时间戳</td>
<td align="left">以基准时间的形式</td>
</tr>
<tr>
<td align="left">-XX:+PrintGCDateStamps</td>
<td align="center"></td>
<td align="left">输出GC的时间戳</td>
<td align="left">以日期的形式，如 2013-05-04T21:53:59.234+0800</td>
</tr>
<tr>
<td align="left">-XX:ErrorFile=<code>&lt;file&gt;</code></td>
<td align="center">●</td>
<td align="left">当 JVM 出现致命错误时，生成错误文件，包括了导致 jvm crash 的重要信息</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintGCApplicationStoppedTime</td>
<td align="center">●</td>
<td align="left">打印 JVM 的停顿时间</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintGCApplicationConcurrentTime</td>
<td align="center"></td>
<td align="left">打印 JVM 在两次停顿之间的正常运行时间</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+HeapDumpOnOutOfMemoryError</td>
<td align="center">●</td>
<td align="left">遇到 OutOfMemoryError 时拍摄一个<code>堆转储快照</code>，并将其保存在一个文件中。</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+HeapDumpBeforeFullGC</td>
<td align="center">●</td>
<td align="left">遇到 Full GC 前拍摄一个<code>堆转储快照</code>，并将其保存在一个文件中。</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+HeapDumpAfterFullGC</td>
<td align="center"></td>
<td align="left">遇到 Full GC 后拍摄一个<code>堆转储快照</code>，并将其保存在一个文件中。</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:HeapDumpPath=<code>&lt;file&gt;</code></td>
<td align="center">●</td>
<td align="left">指定导出堆的存放路径</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:-OmitStackTraceInFastThrow</td>
<td align="center">●</td>
<td align="left">要求 JVM 始终抛出含堆栈的异常</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UseGCLogFileRotation</td>
<td align="center"></td>
<td align="left">开启日志文件的循环</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:NumberOfGCLogfiles=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">配置日志循环文件个数</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:GCLogfileSize=<code>&lt;size&gt;&lt;unit&gt;</code></td>
<td align="center"></td>
<td align="left">指定日志文件大小</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:NativeMemoryTracking=[off | summary | detail]</td>
<td align="center"></td>
<td align="left">
<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr007.html" target="_blank" rel="noopener">查看 JVM 本地方法使用情况</a></td>
<td align="left"><p>jcmd <pid> VM.native_memory [summary &amp;##124; detail &amp;##124; baseline &amp;##124; summary.diff &amp;##124; detail.diff &amp;##124; shutdown] [scale= KB &amp;##124; MB &amp;##124; GB] <p/></td>
</tr>
<tr>
<td align="left">-XX:+PrintNMTStatistics</td>
<td align="center"></td>
<td align="left">在 JVM 退出时打印 NMT 报告</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-verbose:class</td>
<td align="center"></td>
<td align="left">在程序运行的时候有多少类被加载</td>
<td align="left">verbose:class 来监视 java -verbose:class</td>
</tr>
<tr>
<td align="left">-verbose:gc</td>
<td align="center"></td>
<td align="left">在虚拟机发生内存回收时在输出设备显示信息</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-verbose:jni</td>
<td align="center"></td>
<td align="left">输出 native 方法调用的相关情况</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintHeapAtGC</td>
<td align="center"></td>
<td align="left">在进行 GC 的前后打印出堆的信息</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintFlagsInitial</td>
<td align="center"></td>
<td align="left">显示所有可设置参数及默认值</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintFlagsFinal</td>
<td align="center"></td>
<td align="left">显示可以获取到所有设置后参数及值</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UnlockDiagnosticVMOptions</td>
<td align="center"></td>
<td align="left">解锁对 JVM 进行诊断的选项参数</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintCommandLineFlags</td>
<td align="center"></td>
<td align="left">显示出 JVM 初始化完毕后所有跟最初的默认值不同的参数及它们的值</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintTenuringDistribution</td>
<td align="center"></td>
<td align="left">打印内存模型各代信息</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+DisplayVMOutput</td>
<td align="center"></td>
<td align="left">打印 JVM 输出</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+LogVMOutput</td>
<td align="center"></td>
<td align="left">记录 JVM 输出到日志</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintJNIGCStalls</td>
<td align="center"></td>
<td align="left">打印进入临界区 (JVM 传向 JNI) 的线程信息</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintFLSStatistics=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">GC 前后输出内存的统计信息</td>
<td align="left">当 <code>size &gt; 1</code> 时还会输出 IndexedFreeLists 统计信息</td>
</tr>
<tr>
<td align="left">-XX:+PrintSafepointStatistics</td>
<td align="center"></td>
<td align="left">输出 safepoint 的统计信息</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintSafepointStatisticsCount=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">输出 safepoint 的统计次数</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintAdaptiveSizePolicy</td>
<td align="center"></td>
<td align="left">打印自适应收集的大小</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintReferenceGC</td>
<td align="center"></td>
<td align="left">跟踪系统内的软引用,弱引用,虚引用和 finallize 队列</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintClassHistogram</td>
<td align="center"></td>
<td align="left">打印出实例的数量以及空间大小</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<h3 id="jit-1">JIT</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:+PrintInlining</td>
<td align="center"></td>
<td align="left">打印内联优化的方法</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintCompilation</td>
<td align="center"></td>
<td align="left">简单的输出一些关于从字节码转化成本地代码的编译过程</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+LogCompilation</td>
<td align="center"></td>
<td align="left">输出 JIT 的编译信息</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintAssembly</td>
<td align="center"></td>
<td align="left">通过使用外部的 disassembler.so 库打印汇编的字节码和 native 方法来辅助分析</td>
<td align="left">需要和-XX:UnlockDiagnosticVMOptions一起使用</td>
</tr>
<tr>
<td align="left">-XX:+TraceClassLoading</td>
<td align="center"></td>
<td align="left">动态跟踪类的加载</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+TraceClassUnloading</td>
<td align="center"></td>
<td align="left">动态跟踪类的卸载</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintInterpreter</td>
<td align="center"></td>
<td align="left">打印解释过程中生成的汇编指令</td>
<td align="left">exclude，跳过编译指定的方法; compileonly，只编译指定的方法; inline/dontinline，设置是否内联指定方法; print，打印生成的汇编代码</td>
</tr>
<tr>
<td align="left">-XX:+PrintAssembly</td>
<td align="center"></td>
<td align="left">打印JIT编译过程中生成的汇编指令</td>
<td align="left">无法使用该参数可以用 -XX:+PrintOptoAssembly 来代替</td>
</tr>
</tbody>
</table>
<h3 id="g1-1">G1</h3>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-XX:G1LogLevel=fine, finer, finest</td>
<td align="center"></td>
<td align="left">日志包含信息以及每个工作线程的信息</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+PrintStringDeduplicationStatistics</td>
<td align="center"></td>
<td align="left">打印字符串去重的影响</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<h2 id="其他">其他</h2>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="center">常用</th>
<th align="left">说明</th>
<th align="left">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">-Dcom.sun.management.jmxremote=<code>&lt;boolean&gt;</code></td>
<td align="center"></td>
<td align="left">是否支持远程 JMX 监控</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Dcom.sun.management.jmxremote.port=<code>&lt;port&gt;</code></td>
<td align="center"></td>
<td align="left">指定远程监控端口号，随机分配 RMI 端口号</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Dcom.sun.management.jmxremote.ssl=<code>&lt;boolean&gt;</code></td>
<td align="center"></td>
<td align="left">是否对连接开启 SSL 加密</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Dcom.sun.management.jmxremote.authenticate=<code>&lt;boolean&gt;</code></td>
<td align="center"></td>
<td align="left">是否需要开启用户认证</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Dcom.sun.management.jmxremote.rmi.port=<code>&lt;port&gt;</code></td>
<td align="center"></td>
<td align="left">指定 RMI 与远程监控端口号</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Djava.rmi.server.hostname=<code>&lt;host&gt;</code></td>
<td align="center"></td>
<td align="left">指定 RMI 服务的对应主机名</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Djava.net.preferIPv4Stack=true</td>
<td align="center"></td>
<td align="left">优先使用 IPv4</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Djava.security.egd=file:/dev/./urandom</td>
<td align="center">●</td>
<td align="left">使用非阻塞的随机数与熵池策略</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Djava.util.concurrent.ForkJoinPool.common.parallelism=<code>&lt;size&gt;</code></td>
<td align="center"></td>
<td align="left">修改 ForkJoinPool 的默认线程数</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UnlockExperimentalVMOptions</td>
<td align="center"></td>
<td align="left">解锁 JVM 实验性参数</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+UnlockCommercialFeatures</td>
<td align="center"></td>
<td align="left">解锁 JVM 商业特性</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+LogCommercialFeatures</td>
<td align="center"></td>
<td align="left">对商业特性进行日志记录</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+FlightRecorder</td>
<td align="center"></td>
<td align="left">开启 JFR 监控</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:FlightRecorderOptions=<code>&lt;parameter&gt;=&lt;value&gt;</code></td>
<td align="center"></td>
<td align="left">设置 JFR 监控参数</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:OnError=<code>command</code></td>
<td align="center"></td>
<td align="left">设置当发生不可恢复的错误时执行的命令</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:OnOutOfMemoryError=<code>command</code></td>
<td align="center"></td>
<td align="left">设置当发生内存溢出错误时执行的命令</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-XX:+AggressiveOpts</td>
<td align="center"></td>
<td align="left">使用预设的优化參數</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">-Djava.awt.headless=true</td>
<td align="center"></td>
<td align="left">使用计算能力模拟外设功能</td>
<td align="left">例如创建图片</td>
</tr>
</tbody>
</table>

		    </div>
		  
		</article>
	</main>
</div>

<div class="col-12 col-md-8 col-xl-8" style="margin: auto;">
	





<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/gc/">GC</a>
  
</div>














  
  





  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <img class="avatar mr-3 avatar-circle" src="/authors/admin/avatar_hu26548cae460c5612c14a1e666ae3fbb7_175055_270x270_fill_q90_lanczos_center.jpg" alt="">
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://moyada.github.io"></a></h5>
      <h6 class="card-subtitle">老白兔</h6>
      <p class="card-text">我们不生产代码我们只是代码的搬运工</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
    <li>
      <a href="mailto:xykmoyada@gmail.com" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/moyada" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>







<section id="comments">
  
</section>




<div class="article-widget">
  
<div class="post-nav row" style="margin-left: -50px; margin-right: -50px">
  <div class="col-12 col-md-6 col-xl-6">
  
    
    <span class="post-nav-item">
      <span class="meta-nav">上一篇</span>&nbsp;
      <a style="color: rgb(80,150,255)" href="/post/cros/" rel="prev">通过 CROS 协议解决跨域问题</a>
    </span>
  
  </div>

  <div class="col-12 col-md-6 col-xl-6">
    <div style="float: right;">
      
      
      
        <span class="post-nav-item">
          <span class="meta-nav">下一篇</span>&nbsp;
          <a style="color: rgb(80,150,255)" href="/post/jvm/" rel="next">Java 虚拟机总结</a>
        </span>
      
    </div>
  </div>
</div>

</div>



  
  


</div>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.8/mermaid.min.js" integrity="sha256-lyWCDMnMeZiXRi7Zl54sZGKYmgQs4izcT7+tKc+KUBk=" crossorigin="anonymous" title="mermaid"></script>
      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"没有找到结果","placeholder":"搜索...","results":"搜索结果"};
      const content_type = {
        'post': "文章",
        'project': "项目",
        'publication' : "出版物",
        'talk' : "演讲"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.37431be2d92d7fb0160054761ab79602.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    © 2017 - 2020 moyada &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> 复制
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> 下载
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
